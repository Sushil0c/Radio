
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Radio</title>
<style>
body {
  margin: 0;
  padding: 0;
  background-color: #f8f9fa; /* Light gray background */
}

.container {
  position: relative;
  height: 100vh;
  overflow: auto;
  padding-bottom: 80px; /* Space for buttons */
}

.button-container {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background-color: #343a40; /* Dark gray background for button container */
  padding: 10px 0;
  display: flex;
  justify-content: space-around; /* Adjust button spacing */
}

button, p {
  margin: 10px;
  padding: 10px 20px;
  font-size: 16px;
  cursor: pointer;
  border: none;
  background-color: #007bff; /* Blue color for buttons */
  color: #ffffff; /* White text color for buttons */
  border-radius: 5px; /* Rounded corners for buttons */
}

.novel {
  font-weight: bold;
}

#currentNovel {
  margin-top: 20px;
  font-weight: bold;
  text-align: center;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black background */
  color: #ffffff; /* White text color */
  padding: 10px 0;
  z-index: 999; /* Ensure it's on top of other elements */
}

#waveform {
  width: 100%;
  height: 200px;
  background-color: #eee;
}
</style>
</head>
<body>
<div id="currentNovel"></div>
<div class="container">
  <div class="novels">
    <p class="novel" data-src="https://stream.hamropatro.com/8729.mp3">Radio paschimanchal 99.4mhz</p>
    <p class="novel" data-src="http://stream.zenolive.com/wtuvp08xq1duv.mp3">Ujyaalo ninety radio</p>
    <p class="novel" data-src="http://onlineradio.websoftitnepal.com/8048/stream.mp3">nepali sanchar radio</p>
    <p class="novel" data-src="https://radio-broadcast.ekantipur.com/stream.mp3">Radio kantipur</p>
<p class="novel" data-src="https://stream-43.zeno.fm/xm2babvnephvv">Swadesh FM</p>
<p class="novel" data-src="http://radio.itechnepal.com:8964/live">Radio annapurna </p>
<p class="novel" data-src="https://astream.nepalipatro.com.np:8066/index.htmll">Radio malmala</p>

  </div>
</div>
<div id="waveform"></div>
<div class="button-container">
  <button id="playPauseBtn">Play</button>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.26/Tone.js"></script>
<script src="https://unpkg.com/wavesurfer.js"></script>
<script>
const novels = document.querySelectorAll('.novel');
const playPauseBtn = document.getElementById('playPauseBtn');
const recordBtn = document.getElementById('recordBtn');
let audioPlayer = null;
let mediaRecorder = null;
let isRecording = false;
let chunks = [];

novels.forEach(novel => {
  novel.addEventListener('click', function() {
    const audioSrc = this.getAttribute('data-src');
    const novelTitle = this.textContent;
    if (audioPlayer) {
      audioPlayer.pause();
    }
    audioPlayer = new Audio(audioSrc);
    audioPlayer.play();
    document.getElementById('currentNovel').textContent = `Now Playing: ${novelTitle}`;
    playPauseBtn.textContent = 'Pause';  // Update button text to 'Pause' when playing
  });
});

playPauseBtn.addEventListener('click', function() {
  if (audioPlayer) {
    if (audioPlayer.paused) {
      audioPlayer.play();
      playPauseBtn.textContent = 'Pause';
    } else {
      audioPlayer.pause();
      playPauseBtn.textContent = 'Play';
    }
  }
});

recordBtn.addEventListener('click', function() {
  if (!isRecording) {
    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
      navigator.mediaDevices.getUserMedia({ audio: true })
        .then(function(stream) {
          mediaRecorder = new MediaRecorder(stream);
          mediaRecorder.start();
          isRecording = true;
          recordBtn.textContent = 'Stop Recording';

          mediaRecorder.ondataavailable = function(e) {
            chunks.push(e.data);
          };

          mediaRecorder.onstop = function() {
            const blob = new Blob(chunks, { 'type' : 'audio/ogg; codecs=opus' });
            const audioURL = window.URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = audioURL;
            link.download = 'recorded_audio.ogg';
            link.click();
            chunks = [];
          };
        })
        .catch(function(err) {
          console.error('Error accessing microphone:', err);
        });
    } else {
      console.error('getUserMedia not supported on your browser!');
    }
  } else {
    mediaRecorder.stop();
    isRecording = false;
    recordBtn.textContent = 'Record';
  }
});

// Initialize Wavesurfer
const wavesurfer = WaveSurfer.create({
  container: '#waveform',
  waveColor: 'violet',
  progressColor: 'purple',
});

// Start visualizing when audio starts playing
audioPlayer.addEventListener('play', function() {
  wavesurfer.load(audioPlayer.src);
  wavesurfer.play();
});

// Stop visualization when audio pauses
audioPlayer.addEventListener('pause', function() {
  wavesurfer.pause();
});
</script>
</body>
</html>
